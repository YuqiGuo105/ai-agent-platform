spring:
  application:
    name: agent-tools-service
  
  datasource:
    url: ${DB_URL:jdbc:postgresql://centerbeam.proxy.rlwy.net:27055/railway}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
    show-sql: false
  
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:}
      chat:
        options:
          model: ${OPENAI_CHAT_MODEL:gpt-4.1-mini}
          temperature: ${OPENAI_TEMPERATURE:0.3}
      embedding:
        options:
          model: ${OPENAI_EMBEDDING_MODEL:text-embedding-3-small}
          dimensions: ${OPENAI_EMBEDDING_DIMENSIONS:1536}
    
    deepseek:
      api-key: ${DEEPSEEK_API_KEY}
      base-url: ${DEEPSEEK_BASE_URL:https://api.deepseek.com}
      chat:
        options:
          model: ${DEEPSEEK_CHAT_MODEL:deepseek-chat}
          temperature: ${DEEPSEEK_TEMPERATURE:0.2}

# Alibaba DashScope configuration
alibaba:
  dashscope:
    api-key: ${DASHSCOPE_API_KEY:}
    base-url: ${DASHSCOPE_BASE_URL:https://dashscope-intl.aliyuncs.com/compatible-mode/v1}
  file:
    max-pdf-pages: ${MAX_PDF_PAGES:10}
    pdf-dpi: ${PDF_DPI:150}
    max-text-chars: ${MAX_TEXT_CHARS:50000}
    # Vision provider for file content extraction: "qwen-vl" (default) or "openai"
    vision-provider: ${VISION_PROVIDER:qwen-vl}

# Agent service URL for KB retrieval
agent:
  service:
    base-url: ${AGENT_SERVICE_URL:http://localhost:8080}

server:
  port: 8081

# === Swagger UI / OpenAPI Documentation ===
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
  api-docs:
    path: /v3/api-docs
    enabled: true

# === Actuator ===
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: when_authorized